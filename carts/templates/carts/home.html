{% extends 'base.html' %}

{% block content %}
<h1>Cart</h1>

{% if cart.products.count > 0 %}

<table class="table table-dark table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Title</th>
      <th scope="col">Description</th>
      <th scope="col">Price</th>
      <th scope="col">Delete</th>
    </tr>
  </thead>
  <tbody>
{% for el in cart.products.all %}
    <tr>
      <th scope="row">{{forloop.counter}}</th>
      <td><a href='{{el.get_absolute_url}}'>{{el.title}}</a></td>
      <td>{{el.description|truncatechars_html:50}}</td>
      <td>{{el.price}} $</td>
<form method='POST' action='{% url "cart_update" %}' class="d-flex">
                        {% csrf_token %}
             {% if el in cart.products.all %}
    <td>
        <input type='hidden' >
        <button type="submit" name='product_id' value='{{el.pk}}' class="btn-close btn-close-white" aria-label="Close">
        </button>
    </td>
             {% endif %}
</form>
    </tr>
    {% endfor %}
    <tr>
    <tr class="table-light">
    <td class="table-light">TOTAL:</td>
    <td class="table-light"></td>
    <td class="table-light"></td>
    <td class="table-light">{{cart.total}} $</td>
    <td class="table-light">
    </td>
    </tr>
  </tbody>
</table>

<div class="d-grid gap-2 col-6 mx-auto">
  <a href='{% url "checkout" %}' class="btn btn-success"> Checkout </a>
</div>

{% else %}

Cart is empty

{% endif %}

{% endblock %}